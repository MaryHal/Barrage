language: c
compiler:
    - gcc
    - clang

branches:
    only:
        - master

before_install:
    - sudo add-apt-repository --yes ppa:ubuntu-toolchain-r/test
    - sudo add-apt-repository -y ppa:saiarcot895/chromium-beta
    - sudo apt-get --yes update
    - sudo apt-get --yes install gcc-4.8
    - if [ "$CC" == "gcc" ]; then export CC=gcc-4.8; fi
    - sudo apt-get --yes install ninja-build
    - sudo apt-get --yes install liblua5.2-dev

script: python ./bootstrap.py --ci --cxx=$CC && ninja && ./test/bin/btest
